{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "inputs": [
    {
      "id": "herokuApp",
      "type": "pickString",
      "description": "Heroku app",
      "options": ["evoflare-web", "evoflare-web-dev", "evoflare-web-dev01", "evoflare-web-dev02"],
      "default": "evoflare-web-dev"
    }
  ],
  "tasks": [
    {
      "type": "npm",
      "script": "serve",
      "problemMatcher": []
    },
    {
      "label": "heroku: Set env",
      "type": "shell",
      "command": "heroku config:set VUE_APP_ROOT_API=https://evoflare-api.herokuapp.com/",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "group": "heroku"
      },
      "problemMatcher": []
    },
    {
      "label": "heroku: Set remote",
      "type": "shell",
      "command": "heroku git:remote -a ${input:herokuApp}",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "group": "heroku"
      },
      "problemMatcher": []
    },
    {
      "label": "heroku: Open",
      "type": "shell",
      "command": "heroku open -a ${input:herokuApp}",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "group": "heroku"
      },
      "problemMatcher": []
    },
    {
      "label": "heroku: Push",
      "type": "shell",
      "command": "git push heroku master",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "group": "heroku"
      },
      "problemMatcher": []
    },
    {
      "label": "Docker: build",
      "type": "shell",
      "command": "docker build -f Dockerfile -t evoflare-web .",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "group": "docker"
      },
      "problemMatcher": []
    },
    {
      "label": "docker(Registry): Tag web image",
      "type": "shell",
      "command": "docker image tag evoflare-web localhost:50000/web",
      "problemMatcher": []
    },
    {
      "label": "docker(Registry): Push web image",
      "type": "shell",
      "command": "docker push localhost:50000/web",
      "problemMatcher": []
    },
    {
      "label": "docker(Registry): Run web image",
      "type": "shell",
      "command": "docker run --name evoflare-web -p 8080:80 -d -it localhost:50000/web",
      "problemMatcher": []
    },
  ]
}
